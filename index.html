<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BR6G525NDG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-BR6G525NDG');
</script>

<!-- SEO Meta Tags -->
<title>ì›¨ë”©ì •ë³´ë§µ - ì „êµ­ ì›¨ë”©í™€, ìŠ¤íŠœë””ì˜¤, ë“œë ˆìŠ¤ ê°€ê²©ë¹„êµ</title>
<meta name="description" content="ì „êµ­ ì›¨ë”©í™€, ìŠ¤íŠœë””ì˜¤, ë“œë ˆìŠ¤ìƒµ ì •ë³´ë¥¼ í•œëˆˆì—! ì‹¤ì‹œê°„ ê°€ê²©ë¹„êµ, í›„ê¸°, ì˜ˆì‚° ê³„ì‚°ê¸°ê¹Œì§€. ê²°í˜¼ ì¤€ë¹„ì˜ ëª¨ë“  ê²ƒì„ ì›¨ë”©ì •ë³´ë§µì—ì„œ ì‹œì‘í•˜ì„¸ìš”." />
<meta name="keywords" content="ì›¨ë”©í™€, ìŠ¤íŠœë””ì˜¤, ë“œë ˆìŠ¤, ë©”ì´í¬ì—…, ê²°í˜¼ì¤€ë¹„, ì›¨ë”©ì •ë³´, ê°€ê²©ë¹„êµ" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- Open Graph -->
<meta property="og:title" content="ì›¨ë”©ì •ë³´ë§µ - ê²°í˜¼ ì¤€ë¹„ì˜ ëª¨ë“  ê²ƒ" />
<meta property="og:description" content="ì „êµ­ ì›¨ë”© ì—…ì²´ ì •ë³´ì™€ ê°€ê²©ì„ í•œëˆˆì— ë¹„êµí•˜ì„¸ìš”" />
<meta property="og:type" content="website" />

<!-- Kakao Map API -->
<script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=ee4ca5b694129145f0819786d73d107a&libraries=services"></script>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">

<style>
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: "Noto Sans KR", Arial, sans-serif;
  background: #fafafa;
}

/* í—¤ë” */
header {
  background: linear-gradient(135deg, #f0b6c9 0%, #e89bb0 100%);
  color: white;
  padding: 20px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

h1 {
  text-align: center;
  margin: 0 0 10px;
  font-size: 26px;
  font-weight: 700;
}

.subtitle {
  text-align: center;
  font-size: 14px;
  opacity: 0.9;
  margin: 0;
}

/* ê²€ìƒ‰ë°” */
#searchBar {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin: 20px 0 10px;
  padding: 0 16px;
  flex-wrap: wrap;
}

#searchBar input {
  width: 250px;
  max-width: 100%;
  padding: 12px 16px;
  border-radius: 25px;
  border: 1px solid #ddd;
  font-size: 14px;
}

#searchBar button {
  padding: 12px 24px;
  border-radius: 25px;
  border: none;
  background: #f0b6c9;
  color: #fff;
  cursor: pointer;
  font-weight: 500;
  transition: all 0.3s;
}

#searchBar button:hover {
  background: #e89bb0;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(240, 182, 201, 0.4);
}

/* í•„í„°ë°” */
#filterBar {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin-bottom: 14px;
  flex-wrap: wrap;
  padding: 0 16px;
}

#filterBar button {
  padding: 10px 18px;
  border-radius: 20px;
  border: 1px solid #ddd;
  background: #fff;
  cursor: pointer;
  font-size: 14px;
  transition: all 0.3s;
}

#filterBar button:hover {
  border-color: #f0b6c9;
  color: #f0b6c9;
}

#filterBar button.active {
  background: #f0b6c9;
  color: #fff;
  border-color: #f0b6c9;
}

/* ê°€ê²© í•„í„° */
#priceFilter {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin-bottom: 20px;
  padding: 0 16px;
  flex-wrap: wrap;
}

#priceFilter select {
  padding: 8px 16px;
  border-radius: 20px;
  border: 1px solid #ddd;
  background: #fff;
  font-size: 13px;
  cursor: pointer;
}

/* í†µê³„ ì¹´ë“œ */
#statsBar {
  display: flex;
  justify-content: center;
  gap: 16px;
  margin: 0 16px 20px;
  flex-wrap: wrap;
}

.stat-card {
  background: white;
  padding: 12px 20px;
  border-radius: 15px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  text-align: center;
  min-width: 100px;
}

.stat-number {
  font-size: 20px;
  font-weight: 700;
  color: #f0b6c9;
}

.stat-label {
  font-size: 12px;
  color: #777;
  margin-top: 4px;
}

/* ë ˆì´ì•„ì›ƒ */
#contentWrap {
  display: flex;
  justify-content: center;
  gap: 20px;
  padding: 0 16px 40px;
  max-width: 1400px;
  margin: 0 auto;
}

#map {
  width: 55%;
  height: 600px;
  border-radius: 20px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.12);
}

#sideWrap {
  width: 45%;
  max-width: 480px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

/* ë¦¬ìŠ¤íŠ¸ */
#list {
  background: #fff;
  border-radius: 20px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.1);
  overflow-y: auto;
  max-height: 400px;
  padding: 8px;
}

.list-item {
  display: flex;
  gap: 14px;
  padding: 16px;
  cursor: pointer;
  border-radius: 12px;
  margin-bottom: 8px;
  transition: all 0.3s;
  position: relative;
}

.list-item:hover {
  background: #fff5f8;
  transform: translateX(4px);
}

.favorite-btn {
  position: absolute;
  top: 12px;
  right: 12px;
  background: none;
  border: none;
  font-size: 20px;
  cursor: pointer;
  transition: transform 0.2s;
}

.favorite-btn:hover {
  transform: scale(1.2);
}

.favorite-btn.active {
  color: #ff6b9d;
}

/* ì¸ë„¤ì¼ */
.list-thumb {
  width: 70px;
  height: 70px;
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 30px;
  color: #fff;
  flex-shrink: 0;
}

.thumb-ì›¨ë”©í™€ { background: linear-gradient(135deg, #f0b6c9, #e89bb0); }
.thumb-ìŠ¤íŠœë””ì˜¤ { background: linear-gradient(135deg, #7ab8f5, #5a9de5); }
.thumb-ë“œë ˆìŠ¤ { background: linear-gradient(135deg, #c8a2e8, #b088d8); }
.thumb-ë©”ì´í¬ì—… { background: linear-gradient(135deg, #f5b27a, #e5a266); }
.thumb-ìŠ¤ëª°ì›¨ë”© { background: linear-gradient(135deg, #90d5a0, #7cc58d); }

.list-info {
  flex: 1;
}

.list-info h3 {
  margin: 0 0 4px;
  font-size: 16px;
  font-weight: 600;
}

.list-meta {
  font-size: 12px;
  color: #777;
  margin-bottom: 6px;
}

.list-price {
  font-size: 13px;
  color: #f0b6c9;
  font-weight: 600;
}

.list-rating {
  font-size: 13px;
  color: #ffa500;
}

/* ìƒì„¸ íŒ¨ë„ */
#detailPanel {
  background: #fff;
  border-radius: 20px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.12);
  padding: 24px;
  display: none;
  max-height: 500px;
  overflow-y: auto;
}

#detailPanel h2 {
  margin: 0 0 12px;
  font-size: 22px;
  font-weight: 700;
}

#detailPanel .tag {
  display: inline-block;
  padding: 6px 14px;
  border-radius: 15px;
  font-size: 12px;
  margin-bottom: 12px;
  font-weight: 500;
}

.tag-ì›¨ë”©í™€ { background:#ffe6ee; color:#c94a6a; }
.tag-ìŠ¤íŠœë””ì˜¤ { background:#e7f2ff; color:#2d6cc0; }
.tag-ë“œë ˆìŠ¤ { background:#f2eaff; color:#6b3fa0; }
.tag-ë©”ì´í¬ì—… { background:#fff0e3; color:#c96a22; }
.tag-ìŠ¤ëª°ì›¨ë”© { background:#e8f5ea; color:#4a9960; }

.detail-section {
  margin: 20px 0;
}

.detail-section h3 {
  font-size: 16px;
  margin: 0 0 10px;
  color: #333;
}

/* ê°¤ëŸ¬ë¦¬ */
.gallery {
  display: flex;
  gap: 8px;
  overflow-x: auto;
  padding: 8px 0;
}

.gallery img {
  width: 100px;
  height: 100px;
  border-radius: 12px;
  object-fit: cover;
  cursor: pointer;
  transition: transform 0.3s;
}

.gallery img:hover {
  transform: scale(1.05);
}

/* ë¦¬ë·° */
.review-summary {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
  padding: 16px;
  background: #f9f9f9;
  border-radius: 12px;
}

.review-score {
  font-size: 36px;
  font-weight: 700;
  color: #f0b6c9;
}

.review-stars {
  font-size: 24px;
  color: #ffa500;
}

.review-count {
  font-size: 13px;
  color: #777;
}

.review-item {
  padding: 12px;
  background: #f9f9f9;
  border-radius: 10px;
  margin-bottom: 10px;
}

.review-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 6px;
}

.review-author {
  font-weight: 600;
  font-size: 13px;
}

.review-date {
  font-size: 11px;
  color: #999;
}

.review-text {
  font-size: 13px;
  line-height: 1.6;
  color: #555;
}

/* ê°€ê²© í…Œì´ë¸” */
.price-table {
  width: 100%;
  margin-top: 16px;
  border-top: 2px solid #f0f0f0;
  font-size: 14px;
  border-collapse: collapse;
}

.price-table tr {
  border-bottom: 1px solid #f0f0f0;
}

.price-table td {
  padding: 12px 0;
}

.price-table td:first-child {
  color: #777;
}

.price-table td:last-child {
  text-align: right;
  font-weight: 600;
}

.price-table tr:last-child {
  font-weight: 700;
  color: #f0b6c9;
  font-size: 16px;
}

/* ë²„íŠ¼ */
.btn-group {
  display: flex;
  gap: 10px;
  margin-top: 20px;
}

.btn {
  flex: 1;
  padding: 14px;
  border-radius: 14px;
  border: none;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
}

.btn-primary {
  background: #f0b6c9;
  color: #fff;
}

.btn-primary:hover {
  background: #e89bb0;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(240, 182, 201, 0.4);
}

.btn-secondary {
  background: #fff;
  color: #f0b6c9;
  border: 2px solid #f0b6c9;
}

.btn-secondary:hover {
  background: #fff5f8;
}

/* ì˜ˆì‚° ê³„ì‚°ê¸° */
#budgetCalculator {
  background: white;
  padding: 24px;
  border-radius: 20px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.1);
  display: none;
  margin-bottom: 20px;
}

#budgetCalculator h3 {
  margin: 0 0 20px;
  font-size: 18px;
}

.calculator-input {
  margin-bottom: 16px;
}

.calculator-input label {
  display: block;
  margin-bottom: 6px;
  font-size: 14px;
  color: #555;
  font-weight: 500;
}

.calculator-input input,
.calculator-input select {
  width: 100%;
  padding: 12px;
  border: 1px solid #ddd;
  border-radius: 10px;
  font-size: 14px;
}

.budget-result {
  background: linear-gradient(135deg, #f0b6c9, #e89bb0);
  color: white;
  padding: 20px;
  border-radius: 15px;
  text-align: center;
  margin-top: 20px;
}

.budget-result h4 {
  margin: 0 0 10px;
  font-size: 16px;
  opacity: 0.9;
}

.budget-amount {
  font-size: 32px;
  font-weight: 700;
}

/* íƒ­ ë©”ë‰´ */
.tab-menu {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
  border-bottom: 2px solid #f0f0f0;
}

.tab-btn {
  padding: 10px 20px;
  background: none;
  border: none;
  cursor: pointer;
  font-size: 14px;
  color: #777;
  border-bottom: 2px solid transparent;
  transition: all 0.3s;
}

.tab-btn.active {
  color: #f0b6c9;
  border-bottom-color: #f0b6c9;
  font-weight: 600;
}

.tab-content {
  display: none;
}

.tab-content.active {
  display: block;
}

/* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
@media (max-width: 768px) {
  h1 {
    font-size: 20px;
  }
  
  .subtitle {
    font-size: 12px;
  }
  
  #contentWrap {
    flex-direction: column;
    padding: 0 12px 30px;
  }
  
  #map {
    width: 100%;
    height: 350px;
    order: 2;
  }
  
  #sideWrap {
    width: 100%;
    max-width: 100%;
    order: 1;
  }
  
  #list {
    max-height: 300px;
  }
  
  .list-thumb {
    width: 60px;
    height: 60px;
    font-size: 24px;
  }
  
  #statsBar {
    gap: 8px;
  }
  
  .stat-card {
    padding: 10px 16px;
    min-width: 80px;
  }
  
  .stat-number {
    font-size: 18px;
  }
  
  .stat-label {
    font-size: 11px;
  }
}

/* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
.loading {
  text-align: center;
  padding: 40px;
  color: #999;
}

.loading::after {
  content: '...';
  animation: dots 1.5s steps(4, end) infinite;
}

@keyframes dots {
  0%, 20% { content: '.'; }
  40% { content: '..'; }
  60%, 100% { content: '...'; }
}

/* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
#list::-webkit-scrollbar,
#detailPanel::-webkit-scrollbar {
  width: 8px;
}

#list::-webkit-scrollbar-track,
#detailPanel::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 10px;
}

#list::-webkit-scrollbar-thumb,
#detailPanel::-webkit-scrollbar-thumb {
  background: #f0b6c9;
  border-radius: 10px;
}

#list::-webkit-scrollbar-thumb:hover,
#detailPanel::-webkit-scrollbar-thumb:hover {
  background: #e89bb0;
}

/* íˆ´íŒ */
.tooltip {
  position: relative;
  display: inline-block;
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: 120px;
  background-color: #555;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 5px;
  position: absolute;
  z-index: 1;
  bottom: 125%;
  left: 50%;
  margin-left: -60px;
  opacity: 0;
  transition: opacity 0.3s;
  font-size: 12px;
}

.tooltip:hover .tooltiptext {
  visibility: visible;
  opacity: 1;
}
</style>
</head>

<body>

<header>
  <h1>ğŸ’ ì›¨ë”©ì •ë³´ë§µ</h1>
  <p class="subtitle">ì „êµ­ ì›¨ë”© ì—…ì²´ ì •ë³´ì™€ ê°€ê²©ì„ í•œëˆˆì— ë¹„êµí•˜ì„¸ìš”</p>
</header>

<!-- ê²€ìƒ‰ë°” -->
<div id="searchBar">
  <input id="keyword" placeholder="ì§€ì—­ ê²€ìƒ‰ (ì˜ˆ: ê°•ë‚¨, í™ëŒ€, ë¶€ì‚°)" />
  <button onclick="searchPlace()">ğŸ” ê²€ìƒ‰</button>
  <button onclick="toggleBudgetCalculator()">ğŸ’° ì˜ˆì‚°ê³„ì‚°ê¸°</button>
</div>

<!-- ì˜ˆì‚° ê³„ì‚°ê¸° -->
<div id="budgetCalculator">
  <h3>ğŸ’° ìš°ë¦¬ ê²°í˜¼ì‹ ì˜ˆì‚° ê³„ì‚°í•˜ê¸°</h3>
  <div class="calculator-input">
    <label>í•˜ê° ìˆ˜</label>
    <input type="number" id="guestCount" placeholder="ì˜ˆ: 200" value="200" onchange="calculateBudget()">
  </div>
  <div class="calculator-input">
    <label>í¬ë§ ì§€ì—­</label>
    <select id="region" onchange="calculateBudget()">
      <option value="ì„œìš¸">ì„œìš¸</option>
      <option value="ê²½ê¸°">ê²½ê¸°</option>
      <option value="ì¸ì²œ">ì¸ì²œ</option>
      <option value="ë¶€ì‚°">ë¶€ì‚°</option>
      <option value="ëŒ€êµ¬">ëŒ€êµ¬</option>
      <option value="ê¸°íƒ€">ê¸°íƒ€ ì§€ì—­</option>
    </select>
  </div>
  <div class="calculator-input">
    <label>ìŠ¤íƒ€ì¼</label>
    <select id="style" onchange="calculateBudget()">
      <option value="ìŠ¤ëª°ì›¨ë”©">ìŠ¤ëª°ì›¨ë”© (50ì¸ ì´í•˜)</option>
      <option value="ì¼ë°˜">ì¼ë°˜ ì›¨ë”©</option>
      <option value="í”„ë¦¬ë¯¸ì—„">í”„ë¦¬ë¯¸ì—„ ì›¨ë”©</option>
    </select>
  </div>
  <div class="budget-result">
    <h4>ì˜ˆìƒ ì´ ë¹„ìš©</h4>
    <div class="budget-amount" id="budgetAmount">23,500,000ì›</div>
    <p style="font-size:12px; margin:10px 0 0; opacity:0.9;">* ì›¨ë”©í™€ + ìŠ¤íŠœë””ì˜¤ + ë“œë ˆìŠ¤ + ë©”ì´í¬ì—… ê¸°ì¤€</p>
  </div>
</div>

<!-- í•„í„°ë°” -->
<div id="filterBar">
  <button class="active" onclick="filterMarkers('ì „ì²´')">ì „ì²´</button>
  <button onclick="filterMarkers('ì›¨ë”©í™€')">ğŸ’’ ì›¨ë”©í™€</button>
  <button onclick="filterMarkers('ìŠ¤íŠœë””ì˜¤')">ğŸ“¸ ìŠ¤íŠœë””ì˜¤</button>
  <button onclick="filterMarkers('ë“œë ˆìŠ¤')">ğŸ‘— ë“œë ˆìŠ¤</button>
  <button onclick="filterMarkers('ë©”ì´í¬ì—…')">ğŸ’„ ë©”ì´í¬ì—…</button>
  <button onclick="filterMarkers('ìŠ¤ëª°ì›¨ë”©')">ğŸŒ¿ ìŠ¤ëª°ì›¨ë”©</button>
</div>

<!-- ê°€ê²© í•„í„° -->
<div id="priceFilter">
  <select id="priceRange" onchange="applyFilters()">
    <option value="all">ì „ì²´ ê°€ê²©</option>
    <option value="0-1000000">100ë§Œì› ì´í•˜</option>
    <option value="1000000-3000000">100ë§Œì› - 300ë§Œì›</option>
    <option value="3000000-5000000">300ë§Œì› - 500ë§Œì›</option>
    <option value="5000000-999999999">500ë§Œì› ì´ìƒ</option>
  </select>
  
  <select id="ratingFilter" onchange="applyFilters()">
    <option value="0">ì „ì²´ í‰ì </option>
    <option value="4.5">â­ 4.5 ì´ìƒ</option>
    <option value="4.0">â­ 4.0 ì´ìƒ</option>
    <option value="3.5">â­ 3.5 ì´ìƒ</option>
  </select>
</div>

<!-- í†µê³„ -->
<div id="statsBar">
  <div class="stat-card">
    <div class="stat-number" id="totalPlaces">20</div>
    <div class="stat-label">ë“±ë¡ ì—…ì²´</div>
  </div>
  <div class="stat-card">
    <div class="stat-number">4.6</div>
    <div class="stat-label">í‰ê·  í‰ì </div>
  </div>
  <div class="stat-card">
    <div class="stat-number" id="avgPrice">2.8M</div>
    <div class="stat-label">í‰ê·  ê°€ê²©</div>
  </div>
</div>

<!-- ë©”ì¸ ì»¨í…ì¸  -->
<div id="contentWrap">
  <div id="map"></div>

  <div id="sideWrap">
    <div id="list"></div>
    <div id="detailPanel"></div>
  </div>
</div>

<script>
// ì¹´ì¹´ì˜¤ë§µ ì´ˆê¸°í™”
const map = new kakao.maps.Map(document.getElementById('map'), {
  center: new kakao.maps.LatLng(37.5665, 126.9780),
  level: 6
});

const ps = new kakao.maps.services.Places();

// ì›¨ë”© ì—…ì²´ ë°ì´í„° (í™•ì¥ë¨)
const weddingPlaces = [
  // ì›¨ë”©í™€
  { 
    id: 1,
    name: "í–‰ë³µì›¨ë”©í™€", 
    type: "ì›¨ë”©í™€", 
    icon: "ğŸ’’", 
    lat: 37.5665, 
    lng: 126.9780, 
    desc: "ì„œìš¸ ì¤‘ì‹¬ë¶€ ëŒ€í˜• ì›¨ë”©í™€. ìµœëŒ€ 500ëª… ìˆ˜ìš© ê°€ëŠ¥", 
    rating: 4.7,
    reviewCount: 128,
    phone: "02-1234-5678",
    kakao: "http://pf.kakao.com/_example",
    priceInfo: { 
      base: "3,500,000ì›", 
      extra: "500,000ì›(ê½ƒì¥ì‹)", 
      total: "4,000,000ì›",
      numericTotal: 4000000
    },
    images: ["https://via.placeholder.com/300x200/f0b6c9/ffffff?text=Wedding+Hall+1", 
             "https://via.placeholder.com/300x200/e89bb0/ffffff?text=Wedding+Hall+2"],
    reviews: [
      { author: "ê¹€**", rating: 5, date: "2024-12-15", text: "ë„ˆë¬´ ë§Œì¡±ìŠ¤ëŸ¬ì› ì–´ìš”! ì§ì›ë¶„ë“¤ë„ ì¹œì ˆí•˜ì‹œê³  í™€ë„ ì˜ˆë»¤ìŠµë‹ˆë‹¤." },
      { author: "ì´**", rating: 4, date: "2024-11-28", text: "ê°€ê²© ëŒ€ë¹„ ì¢‹ì•˜ì–´ìš”. ìŒì‹ë„ ë§›ìˆì—ˆìŠµë‹ˆë‹¤." },
      { author: "ë°•**", rating: 5, date: "2024-11-10", text: "ìµœê³ ì˜€ìŠµë‹ˆë‹¤! ì¶”ì²œí•´ìš”." }
    ]
  },
  { 
    id: 2,
    name: "ê·¸ëœë“œ ì»¨ë²¤ì…˜í™€", 
    type: "ì›¨ë”©í™€", 
    icon: "ğŸ’’", 
    lat: 37.5012, 
    lng: 127.0396, 
    desc: "ê°•ë‚¨ í”„ë¦¬ë¯¸ì—„ ì›¨ë”©í™€. ê³ ê¸‰ìŠ¤ëŸ¬ìš´ ì¸í…Œë¦¬ì–´", 
    rating: 4.8,
    reviewCount: 89,
    phone: "02-2345-6789",
    kakao: "http://pf.kakao.com/_example",
    priceInfo: { 
      base: "5,000,000ì›", 
      extra: "800,000ì›(í”„ë¦¬ë¯¸ì—„ íŒ¨í‚¤ì§€)", 
      total: "5,800,000ì›",
      numericTotal: 5800000
    },
    images: ["https://via.placeholder.com/300x200/f0b6c9/ffffff?text=Grand+Hall"],
    reviews: [
      { author: "ìµœ**", rating: 5, date: "2025-01-05", text: "ëŸ­ì…”ë¦¬í•˜ê³  ì™„ë²½í–ˆì–´ìš”!" },
      { author: "ì •**", rating: 4, date: "2024-12-20", text: "ê°€ê²©ì€ ìˆì§€ë§Œ ê·¸ë§Œí•œ ê°€ì¹˜ê°€ ìˆìŠµë‹ˆë‹¤." }
    ]
  },
  { 
    id: 3,
    name: "ë¡œë§¨í‹± ê°€ë“ í™€", 
    type: "ì›¨ë”©í™€", 
    icon: "ğŸ’’", 
    lat: 37.5172, 
    lng: 127.0473, 
    desc: "ì•¼ì™¸ ì •ì›ì´ ìˆëŠ” ì›¨ë”©í™€. ìì—° ì¹œí™”ì ", 
    rating: 4.6,
    reviewCount: 156,
    phone: "02-3456-7890",
    kakao: "http://pf.kakao.com/_example",
    priceInfo: { 
      base: "3,200,000ì›", 
      extra: "600,000ì›(ì •ì› ëŒ€ê´€ë£Œ)", 
      total: "3,800,000ì›",
      numericTotal: 3800000
    },
    images: ["https://via.placeholder.com/300x200/f0b6c9/ffffff?text=Garden+Hall"],
    reviews: [
      { author: "ìœ¤**", rating: 5, date: "2024-11-30", text: "ì •ì›ì´ ë„ˆë¬´ ì˜ˆë»ìš”!" }
    ]
  },

  // ìŠ¤íŠœë””ì˜¤
  { 
    id: 4,
    name: "ë¼ë¼ ìŠ¤íŠœë””ì˜¤", 
    type: "ìŠ¤íŠœë””ì˜¤", 
    icon: "ğŸ“¸", 
    lat: 37.5651, 
    lng: 126.9895, 
    desc: "ê°ì„± ì›¨ë”© ì´¬ì˜ ì „ë¬¸. SNS ì¸ê¸° ìŠ¤íŠœë””ì˜¤", 
    rating: 4.6,
    reviewCount: 201,
    phone: "02-4567-8901",
    kakao: "http://pf.kakao.com/_example",
    priceInfo: { 
      base: "1,200,000ì›", 
      extra: "330,000ì›(ì›ë³¸+ìˆ˜ì •ë³¸)", 
      total: "1,530,000ì›",
      numericTotal: 1530000
    },
    images: ["https://via.placeholder.com/300x200/7ab8f5/ffffff?text=Studio+1"],
    reviews: [
      { author: "í•œ**", rating: 5, date: "2024-12-28", text: "ì‚¬ì§„ ì§„ì§œ ì˜ ë‚˜ì™”ì–´ìš”! ê°ë™í–ˆìŠµë‹ˆë‹¤." },
      { author: "ê°•**", rating: 4, date: "2024-12-10", text: "ì‘ê°€ë‹˜ì´ ì •ë§ ì¹œì ˆí•˜ì„¸ìš”." }
    ]
  },
  { 
    id: 5,
    name: "ëª¨ë˜ í¬í† ", 
    type: "ìŠ¤íŠœë””ì˜¤", 
    icon: "ğŸ“¸", 
    lat: 37.5547, 
    lng: 126.9707, 
    desc: "í˜„ëŒ€ì ì¸ ê°ê°ì˜ ì›¨ë”© ìŠ¤íŠœë””ì˜¤", 
    rating: 4.5,
    reviewCount: 178,
    phone: "02-5678-9012",
    kakao: "http://pf.kakao.com/_example",
    priceInfo: { 
      base: "980,000ì›", 
      extra: "200,000ì›(ì•¼ì™¸ì´¬ì˜)", 
      total: "1,180,000ì›",
      numericTotal: 1180000
    },
    images: ["https://via.placeholder.com/300x200/7ab8f5/ffffff?text=Modern+Photo"],
    reviews: [
      { author: "ì†¡**", rating: 5, date: "2025-01-12", text: "ê°€ê²© ëŒ€ë¹„ ìµœê³ !" }
    ]
  },
  { 
    id: 6,
    name: "í´ë˜ì‹ ì›¨ë”©ìŠ¤ëƒ…", 
    type: "ìŠ¤íŠœë””ì˜¤", 
    icon: "ğŸ“¸", 
    lat: 37.4979, 
    lng: 127.0276, 
    desc: "ì „í†µê³¼ í˜„ëŒ€ê°€ ì–´ìš°ëŸ¬ì§„ ì›¨ë”© ì´¬ì˜", 
    rating: 4.7,
    reviewCount: 92,
    phone: "02-6789-0123",
    kakao: "http://pf.kakao.com/_example",
    priceInfo: { 
      base: "1,500,000ì›", 
      extra: "400,000ì›(ë“œë¡ ì´¬ì˜)", 
      total: "1,900,000ì›",
      numericTotal: 1900000
    },
    images: ["https://via.placeholder.com/300x200/7ab8f5/ffffff?text=Classic+Studio"],
    reviews: [
      { author: "ì¡°**", rating: 5, date: "2024-12-05", text: "ì™„ë²½í•œ ì¶”ì–µ ë§Œë“¤ì—ˆì–´ìš”!" }
    ]
  },

  // ë“œë ˆìŠ¤
  { 
    id: 7,
    name: "ë¸”ë‘ ë“œë ˆìŠ¤", 
    type: "ë“œë ˆìŠ¤", 
    icon: "ğŸ‘—", 
    lat: 37.57, 
    lng: 126.982, 
    desc: "ìœ ëŸ½ ìˆ˜ì… ë“œë ˆìŠ¤ ì „ë¬¸. ë§ì¶¤ ì œì‘ ê°€ëŠ¥", 
    rating: 4.8,
    reviewCount: 145,
    phone: "02-7890-1234",
    kakao: "http://pf.kakao.com/_example",
    priceInfo: { 
      base: "2,000,000ì›", 
      extra: "200,000ì›(í”¼íŒ…ë¹„)", 
      total: "2,200,000ì›",
      numericTotal: 2200000
    },
    images: ["https://via.placeholder.com/300x200/c8a2e8/ffffff?text=Dress+Shop"],
    reviews: [
      { author: "ì˜¤**", rating: 5, date: "2025-01-08", text: "ë“œë ˆìŠ¤ê°€ ë„ˆë¬´ ì˜ˆë»ìš”! ê³µì£¼ ëœ ê¸°ë¶„" },
      { author: "ì„**", rating: 4, date: "2024-12-22", text: "ë‹¤ì–‘í•œ ìŠ¤íƒ€ì¼ì´ ë§ì•„ìš”" }
    ]
  },
  { 
    id: 8,
    name: "ì—˜ë ˆê°•ìŠ¤ ì›¨ë”©ë“œë ˆìŠ¤", 
    type: "ë“œë ˆìŠ¤", 
    icon: "ğŸ‘—", 
    lat: 37.5133, 
    lng: 127.1028, 
    desc: "êµ­ë‚´ ë””ìì´ë„ˆ ë“œë ˆìŠ¤ ì»¬ë ‰ì…˜", 
    rating: 4.5,
    reviewCount: 67,
    phone: "02-8901-2345",
    kakao: "http://pf.kakao.com/_example",
    priceInfo: { 
      base: "1,500,000ì›", 
      extra: "150,000ì›(ìˆ˜ì„ ë¹„)", 
      total: "1,650,000ì›",
      numericTotal: 1650000
    },
    images: ["https://via.placeholder.com/300x200/c8a2e8/ffffff?text=Elegance"],
    reviews: [
      { author: "ì‹ **", rating: 5, date: "2024-11-18", text: "ìƒë‹´ë„ ì¹œì ˆí•˜ê³  ì¢‹ì•˜ì–´ìš”" }
    ]
  },

  // ë©”ì´í¬ì—…
  { 
    id: 9,
    name: "ë¡œì¦ˆ ë©”ì´í¬ì—…", 
    type: "ë©”ì´í¬ì—…", 
    icon: "ğŸ’„", 
    lat: 37.5688, 
    lng: 126.9835, 
    desc: "20ë…„ ê²½ë ¥ ì›¨ë”© ë©”ì´í¬ì—… ì „ë¬¸", 
    rating: 4.5,
    reviewCount: 234,
    phone: "02-9012-3456",
    kakao: "http://pf.kakao.com/_example",
    priceInfo: { 
      base: "500,000ì›", 
      extra: "150,000ì›(ì§ê¸‰ì§€ì •ë¹„)", 
      total: "650,000ì›",
      numericTotal: 650000
    },
    images: ["https://via.placeholder.com/300x200/f5b27a/ffffff?text=Makeup"],
    reviews: [
      { author: "ì•ˆ**", rating: 5, date: "2025-01-15", text: "ë©”ì´í¬ì—… ì§„ì§œ ì˜ˆì˜ê²Œ í•´ì£¼ì„¸ìš”!" },
      { author: "ë°°**", rating: 4, date: "2024-12-30", text: "ë§Œì¡±í•©ë‹ˆë‹¤" }
    ]
  },
  { 
    id: 10,
    name: "ë·°í‹° ì•„ëœ°ë¦¬ì—", 
    type: "ë©”ì´í¬ì—…", 
    icon: "ğŸ’„", 
    lat: 37.5019, 
    lng: 127.0411, 
    desc: "ë§ì¶¤í˜• ì›¨ë”© ë©”ì´í¬ì—… & í—¤ì–´", 
    rating: 4.7,
    reviewCount: 189,
    phone: "02-0123-4567",
    kakao: "http://pf.kakao.com/_example",
    priceInfo: { 
      base: "600,000ì›", 
      extra: "100,000ì›(ì‹œì—° ë©”ì´í¬ì—…)", 
      total: "700,000ì›",
      numericTotal: 700000
    },
    images: ["https://via.placeholder.com/300x200/f5b27a/ffffff?text=Beauty"],
    reviews: [
      { author: "ìœ **", rating: 5, date: "2024-12-12", text: "ë„ˆë¬´ ë§Œì¡±í•´ìš”!" }
    ]
  },

  // ìŠ¤ëª°ì›¨ë”©
  { 
    id: 11,
    name: "ìˆ²ì† ì •ì› ì¹´í˜", 
    type: "ìŠ¤ëª°ì›¨ë”©", 
    icon: "ğŸŒ¿", 
    lat: 37.572, 
    lng: 126.975, 
    desc: "ì•¼ì™¸ ì •ì› ìŠ¤ëª°ì›¨ë”© ì „ë¬¸. 50ì¸ ì´í•˜", 
    rating: 4.9,
    reviewCount: 76,
    phone: "02-1122-3344",
    kakao: "http://pf.kakao.com/_example",
    priceInfo: { 
      base: "1,500,000ì›(ëŒ€ê´€)", 
      extra: "ì¸ë‹¹ 55,000ì›(ë·”í˜)", 
      total: "ì¸ì›ë³„ ìƒì´",
      numericTotal: 1500000
    },
    images: ["https://via.placeholder.com/300x200/90d5a0/ffffff?text=Garden+Cafe"],
    reviews: [
      { author: "í™**", rating: 5, date: "2025-01-20", text: "ì•„ëŠ‘í•˜ê³  ë”°ëœ»í•œ ë¶„ìœ„ê¸° ìµœê³ !" },
      { author: "ë¬¸**", rating: 5, date: "2024-12-18", text: "ì†Œê·œëª¨ ì›¨ë”© ì›í•˜ì‹œë©´ ê°•ì¶”!" }
    ]
  },
  { 
    id: 12,
    name: "í•˜ìš°ìŠ¤ ì›¨ë”©í™€", 
    type: "ìŠ¤ëª°ì›¨ë”©", 
    icon: "ğŸŒ¿", 
    lat: 37.5445, 
    lng: 127.0557, 
    desc: "ë‹¨ë… í•˜ìš°ìŠ¤ ëŒ€ê´€ ìŠ¤ëª°ì›¨ë”©", 
    rating: 4.6,
    reviewCount: 54,
    phone: "02-2233-4455",
    kakao: "http://pf.kakao.com/_example",
    priceInfo: { 
      base: "2,000,000ì›", 
      extra: "ì¸ë‹¹ 65,000ì›(ë·”í˜)", 
      total: "ì¸ì›ë³„ ìƒì´",
      numericTotal: 2000000
    },
    images: ["https://via.placeholder.com/300x200/90d5a0/ffffff?text=House+Wedding"],
    reviews: [
      { author: "ì„œ**", rating: 5, date: "2024-11-25", text: "í”„ë¼ì´ë¹—í•˜ê³  ì¢‹ì•˜ì–´ìš”" }
    ]
  },

  // ì¶”ê°€ ë°ì´í„°
  { 
    id: 13,
    name: "ì‹ ë¼ ì›¨ë”©í™€", 
    type: "ì›¨ë”©í™€", 
    icon: "ğŸ’’", 
    lat: 37.5558, 
    lng: 126.9371, 
    desc: "í˜¸í…”ì‹ ì›¨ë”©í™€. 5ì„±ê¸‰ ì„œë¹„ìŠ¤", 
    rating: 4.9,
    reviewCount: 312,
    phone: "02-3344-5566",
    kakao: "http://pf.kakao.com/_example",
    priceInfo: { 
      base: "6,500,000ì›", 
      extra: "1,200,000ì›(VIPíŒ¨í‚¤ì§€)", 
      total: "7,700,000ì›",
      numericTotal: 7700000
    },
    images: ["https://via.placeholder.com/300x200/f0b6c9/ffffff?text=Hotel+Wedding"],
    reviews: [
      { author: "ê¶Œ**", rating: 5, date: "2025-01-18", text: "ìµœìƒê¸‰ ì„œë¹„ìŠ¤ì˜€ì–´ìš”!" }
    ]
  },
  { 
    id: 14,
    name: "íŒŒí‹°ì˜¤ ìŠ¤íŠœë””ì˜¤", 
    type: "ìŠ¤íŠœë””ì˜¤", 
    icon: "ğŸ“¸", 
    lat: 37.5217, 
    lng: 126.9244, 
    desc: "ì•¼ì™¸ ì´¬ì˜ íŠ¹í™” ìŠ¤íŠœë””ì˜¤", 
    rating: 4.4,
    reviewCount: 98,
    phone: "02-4455-6677",
    kakao: "http://pf.kakao.com/_example",
    priceInfo: { 
      base: "850,000ì›", 
      extra: "180,000ì›(ì¶”ê°€ ì´¬ì˜)", 
      total: "1,030,000ì›",
      numericTotal: 1030000
    },
    images: ["https://via.placeholder.com/300x200/7ab8f5/ffffff?text=Patio+Studio"],
    reviews: [
      { author: "ë¯¼**", rating: 4, date: "2024-12-08", text: "ì•¼ì™¸ ì‚¬ì§„ ì˜ˆë»ìš”" }
    ]
  },
  { 
    id: 15,
    name: "í”„ë¦°ì„¸ìŠ¤ ë“œë ˆìŠ¤ìƒµ", 
    type: "ë“œë ˆìŠ¤", 
    icon: "ğŸ‘—", 
    lat: 37.5087, 
    lng: 127.0632, 
    desc: "ì»¤ìŠ¤í…€ ë“œë ˆìŠ¤ ì œì‘ ì „ë¬¸", 
    rating: 4.6,
    reviewCount: 71,
    phone: "02-5566-7788",
    kakao: "http://pf.kakao.com/_example",
    priceInfo: { 
      base: "2,500,000ì›", 
      extra: "300,000ì›(ë§ì¶¤ ì œì‘ë¹„)", 
      total: "2,800,000ì›",
      numericTotal: 2800000
    },
    images: ["https://via.placeholder.com/300x200/c8a2e8/ffffff?text=Princess"],
    reviews: [
      { author: "í•˜**", rating: 5, date: "2025-01-10", text: "ì„¸ìƒì— í•˜ë‚˜ë¿ì¸ ë“œë ˆìŠ¤!" }
    ]
  },
  { 
    id: 16,
    name: "ê¸€ë¡œìš° ë©”ì´í¬ì—…ìƒµ", 
    type: "ë©”ì´í¬ì—…", 
    icon: "ğŸ’„", 
    lat: 37.5333, 
    lng: 126.9906, 
    desc: "ìì—°ìŠ¤ëŸ¬ìš´ ë©”ì´í¬ì—… ìŠ¤íƒ€ì¼", 
    rating: 4.3,
    reviewCount: 156,
    phone: "02-6677-8899",
    kakao: "http://pf.kakao.com/_example",
    priceInfo: { 
      base: "450,000ì›", 
      extra: "120,000ì›(ë¦¬í—ˆì„¤)", 
      total: "570,000ì›",
      numericTotal: 570000
    },
    images: ["https://via.placeholder.com/300x200/f5b27a/ffffff?text=Glow"],
    reviews: [
      { author: "ê³ **", rating: 4, date: "2024-11-20", text: "ìì—°ìŠ¤ëŸ½ê³  ì¢‹ì•„ìš”" }
    ]
  },
  { 
    id: 17,
    name: "ë¹„ìŠ¤íƒ€ ì›¨ë”©í™€", 
    type: "ì›¨ë”©í™€", 
    icon: "ğŸ’’", 
    lat: 37.4862, 
    lng: 127.0361, 
    desc: "ê°•ë‚¨ ì¤‘ì‹¬ ì¤‘í˜• ì›¨ë”©í™€", 
    rating: 4.5,
    reviewCount: 189,
    phone: "02-7788-9900",
    kakao: "http://pf.kakao.com/_example",
    priceInfo: { 
      base: "4,200,000ì›", 
      extra: "600,000ì›(ì¶”ê°€ì˜µì…˜)", 
      total: "4,800,000ì›",
      numericTotal: 4800000
    },
    images: ["https://via.placeholder.com/300x200/f0b6c9/ffffff?text=Vista"],
    reviews: [
      { author: "ë‚˜**", rating: 4, date: "2024-12-15", text: "ê¹”ë”í•˜ê³  ì¢‹ì•˜ì–´ìš”" }
    ]
  },
  { 
    id: 18,
    name: "ì—ì´ìŠ¤ ìŠ¤íŠœë””ì˜¤", 
    type: "ìŠ¤íŠœë””ì˜¤", 
    icon: "ğŸ“¸", 
    lat: 37.5796, 
    lng: 126.9770, 
    desc: "ìµœì‹  ì¥ë¹„ ì™„ë¹„ ìŠ¤íŠœë””ì˜¤", 
    rating: 4.8,
    reviewCount: 143,
    phone: "02-8899-0011",
    kakao: "http://pf.kakao.com/_example",
    priceInfo: { 
      base: "1,350,000ì›", 
      extra: "250,000ì›(ì˜ìƒì´¬ì˜)", 
      total: "1,600,000ì›",
      numericTotal: 1600000
    },
    images: ["https://via.placeholder.com/300x200/7ab8f5/ffffff?text=Ace+Studio"],
    reviews: [
      { author: "ë„**", rating: 5, date: "2025-01-22", text: "ì¥ë¹„ê°€ ì •ë§ ì¢‹ì•„ìš”!" }
    ]
  },
  { 
    id: 19,
    name: "ë¡œì–„ ë“œë ˆìŠ¤", 
    type: "ë“œë ˆìŠ¤", 
    icon: "ğŸ‘—", 
    lat: 37.5244, 
    lng: 127.0378, 
    desc: "ëŒ€ì—¬ ë° íŒë§¤ ì „ë¬¸", 
    rating: 4.4,
    reviewCount: 91,
    phone: "02-9900-1122",
    kakao: "http://pf.kakao.com/_example",
    priceInfo: { 
      base: "1,200,000ì›", 
      extra: "100,000ì›(ì•¡ì„¸ì„œë¦¬)", 
      total: "1,300,000ì›",
      numericTotal: 1300000
    },
    images: ["https://via.placeholder.com/300x200/c8a2e8/ffffff?text=Royal+Dress"],
    reviews: [
      { author: "ë¼**", rating: 4, date: "2024-12-28", text: "ê°€ì„±ë¹„ ì¢‹ì•„ìš”" }
    ]
  },
  { 
    id: 20,
    name: "ëŸ­ì…”ë¦¬ ë©”ì´í¬ì—…", 
    type: "ë©”ì´í¬ì—…", 
    icon: "ğŸ’„", 
    lat: 37.5622, 
    lng: 126.9882, 
    desc: "ê³ ê¸‰ í™”ì¥í’ˆ ì‚¬ìš© ë©”ì´í¬ì—…", 
    rating: 4.6,
    reviewCount: 167,
    phone: "02-0011-2233",
    kakao: "http://pf.kakao.com/_example",
    priceInfo: { 
      base: "750,000ì›", 
      extra: "200,000ì›(ì†ëˆˆì¹ ì—°ì¥)", 
      total: "950,000ì›",
      numericTotal: 950000
    },
    images: ["https://via.placeholder.com/300x200/f5b27a/ffffff?text=Luxury"],
    reviews: [
      { author: "ë§ˆ**", rating: 5, date: "2025-01-05", text: "í™”ì¥ì´ ì •ë§ ì˜¤ë˜ê°€ìš”!" }
    ]
  }
];

// ì¦ê²¨ì°¾ê¸° ê´€ë¦¬
let favorites = JSON.parse(localStorage.getItem('favorites') || '[]');

// ë§ˆì»¤ ê´€ë¦¬
const markers = {};
let currentCategory = 'ì „ì²´';

// ë§ˆì»¤ ìƒì„±
weddingPlaces.forEach(p => {
  markers[p.id] = new kakao.maps.Marker({
    map,
    position: new kakao.maps.LatLng(p.lat, p.lng)
  });
  markers[p.id].category = p.type;
  
  // ë§ˆì»¤ í´ë¦­ ì´ë²¤íŠ¸
  kakao.maps.event.addListener(markers[p.id], 'click', function() {
    openDetail(p);
  });
});

// ë¦¬ìŠ¤íŠ¸ ë Œë”ë§
function renderList(type, priceRange = 'all', minRating = 0) {
  const list = document.getElementById('list');
  list.innerHTML = "";

  let filteredPlaces = weddingPlaces.filter(p => {
    // ì¹´í…Œê³ ë¦¬ í•„í„°
    if (type !== 'ì „ì²´' && p.type !== type) return false;
    
    // ê°€ê²© í•„í„°
    if (priceRange !== 'all') {
      const [min, max] = priceRange.split('-').map(Number);
      if (p.priceInfo.numericTotal < min || p.priceInfo.numericTotal > max) return false;
    }
    
    // í‰ì  í•„í„°
    if (p.rating < minRating) return false;
    
    return true;
  });

  if (filteredPlaces.length === 0) {
    list.innerHTML = '<div class="loading">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</div>';
    return;
  }

  filteredPlaces.forEach(p => {
    const isFavorite = favorites.includes(p.id);
    const div = document.createElement('div');
    div.className = 'list-item';
    div.innerHTML = `
      <div class="list-thumb thumb-${p.type}">${p.icon}</div>
      <div class="list-info">
        <h3>${p.name}</h3>
        <div class="list-meta">${p.type} Â· ğŸ“ ${getDistance(p.lat, p.lng)}</div>
        <div class="list-rating">â­ ${p.rating} (${p.reviewCount})</div>
        <div class="list-price">${p.priceInfo.total}</div>
      </div>
      <button class="favorite-btn ${isFavorite ? 'active' : ''}" onclick="toggleFavorite(event, ${p.id})">
        ${isFavorite ? 'â¤ï¸' : 'ğŸ¤'}
      </button>
    `;
    div.onclick = (e) => {
      if (!e.target.classList.contains('favorite-btn')) {
        openDetail(p);
      }
    };
    list.appendChild(div);
  });
  
  // í†µê³„ ì—…ë°ì´íŠ¸
  updateStats(filteredPlaces);
}

// ê±°ë¦¬ ê³„ì‚° (ê°„ë‹¨ ë²„ì „)
function getDistance(lat, lng) {
  const center = map.getCenter();
  const distance = Math.sqrt(
    Math.pow(center.getLat() - lat, 2) + 
    Math.pow(center.getLng() - lng, 2)
  ) * 111; // ëŒ€ëµì ì¸ km ë³€í™˜
  return distance < 1 ? '1km ì´ë‚´' : `${distance.toFixed(1)}km`;
}

// ì¦ê²¨ì°¾ê¸° í† ê¸€
function toggleFavorite(event, placeId) {
  event.stopPropagation();
  const index = favorites.indexOf(placeId);
  if (index > -1) {
    favorites.splice(index, 1);
  } else {
    favorites.push(placeId);
  }
  localStorage.setItem('favorites', JSON.stringify(favorites));
  renderList(currentCategory);
}

// ìƒì„¸ íŒ¨ë„ ì—´ê¸°
function openDetail(p) {
  map.setLevel(3);
  map.panTo(new kakao.maps.LatLng(p.lat, p.lng));

  const panel = document.getElementById('detailPanel');
  panel.style.display = 'block';
  
  // ë³„ì  í‘œì‹œ
  const stars = 'â­'.repeat(Math.round(p.rating));
  
  // ê°¤ëŸ¬ë¦¬
  const galleryHTML = p.images ? `
    <div class="detail-section">
      <h3>ğŸ“· ê°¤ëŸ¬ë¦¬</h3>
      <div class="gallery">
        ${p.images.map(img => `<img src="${img}" alt="${p.name}" loading="lazy">`).join('')}
      </div>
    </div>
  ` : '';
  
  // ë¦¬ë·°
  const reviewsHTML = p.reviews ? `
    <div class="detail-section">
      <h3>â­ ë¦¬ë·°</h3>
      <div class="review-summary">
        <div>
          <div class="review-score">${p.rating}</div>
          <div class="review-stars">${stars}</div>
          <div class="review-count">${p.reviewCount}ê°œì˜ ë¦¬ë·°</div>
        </div>
      </div>
      ${p.reviews.slice(0, 3).map(r => `
        <div class="review-item">
          <div class="review-header">
            <span class="review-author">${r.author}</span>
            <span class="review-date">${r.date}</span>
          </div>
          <div class="review-stars">${'â­'.repeat(r.rating)}</div>
          <div class="review-text">${r.text}</div>
        </div>
      `).join('')}
    </div>
  ` : '';
  
  // ê°€ê²© ì •ë³´
  const priceTable = p.priceInfo ? `
    <div class="detail-section">
      <h3>ğŸ’° ê°€ê²© ì •ë³´</h3>
      <table class="price-table">
        <tr>
          <td>ê¸°ë³¸ ê²¬ì </td>
          <td>${p.priceInfo.base}</td>
        </tr>
        <tr>
          <td>í•„ìˆ˜ ì¶”ê°€ê¸ˆ</td>
          <td>${p.priceInfo.extra}</td>
        </tr>
        <tr>
          <td>ìµœì¢… ì˜ˆìƒê°€</td>
          <td>${p.priceInfo.total}</td>
        </tr>
      </table>
    </div>
  ` : '';

  panel.innerHTML = `
    <h2>${p.name}</h2>
    <span class="tag tag-${p.type}">${p.type}</span>
    <p style="margin-top:10px; color:#555; line-height:1.6;">${p.desc}</p>
    <p style="margin-top:8px;">â­ ${p.rating} Â· ğŸ“ ${getDistance(p.lat, p.lng)} Â· ğŸ“ ${p.phone}</p>
    
    ${galleryHTML}
    ${priceTable}
    ${reviewsHTML}
    
    <div class="btn-group">
      <button class="btn btn-primary" onclick="inquire('${p.kakao}', '${p.name}')">
        ğŸ’¬ ì¹´í†¡ ìƒë‹´
      </button>
      <button class="btn btn-secondary" onclick="callPhone('${p.phone}')">
        ğŸ“ ì „í™”í•˜ê¸°
      </button>
    </div>
  `;
  
  // ìŠ¤í¬ë¡¤ì„ ìƒë‹¨ìœ¼ë¡œ
  panel.scrollTop = 0;
}

// ë¬¸ì˜í•˜ê¸°
function inquire(kakaoUrl, name) {
  // ì‹¤ì œë¡œëŠ” ì¹´ì¹´ì˜¤í†¡ ì±„ë„ URLë¡œ ì´ë™
  if (confirm(`${name}ì— ìƒë‹´ ë¬¸ì˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
    // window.open(kakaoUrl, '_blank');
    alert('ì¹´ì¹´ì˜¤í†¡ ì±„ë„ ì—°ë™ì€ ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œ ê°€ëŠ¥í•©ë‹ˆë‹¤.\në°ëª¨ ë²„ì „ì…ë‹ˆë‹¤.');
  }
}

// ì „í™”í•˜ê¸°
function callPhone(phone) {
  window.location.href = `tel:${phone}`;
}

// í•„í„° ì ìš©
function filterMarkers(type) {
  currentCategory = type;
  
  document.querySelectorAll('#filterBar button').forEach(b =>
    b.classList.toggle('active', b.innerText.includes(type))
  );

  Object.values(markers).forEach(m =>
    (type === 'ì „ì²´' || m.category === type) ? m.setMap(map) : m.setMap(null)
  );

  document.getElementById('detailPanel').style.display = 'none';
  applyFilters();
}

// ê°€ê²©/í‰ì  í•„í„° ì ìš©
function applyFilters() {
  const priceRange = document.getElementById('priceRange').value;
  const minRating = parseFloat(document.getElementById('ratingFilter').value);
  renderList(currentCategory, priceRange, minRating);
}

// ì¥ì†Œ ê²€ìƒ‰
function searchPlace() {
  const keyword = document.getElementById('keyword').value;
  if (!keyword) {
    alert('ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');
    return;
  }

  ps.keywordSearch(keyword, (data, status) => {
    if (status === kakao.maps.services.Status.OK) {
      map.setCenter(new kakao.maps.LatLng(data[0].y, data[0].x));
      map.setLevel(5);
      renderList(currentCategory);
    } else {
      alert('ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤');
    }
  });
}

// ì˜ˆì‚° ê³„ì‚°ê¸° í† ê¸€
function toggleBudgetCalculator() {
  const calc = document.getElementById('budgetCalculator');
  calc.style.display = calc.style.display === 'none' ? 'block' : 'none';
  if (calc.style.display === 'block') {
    calculateBudget();
  }
}

// ì˜ˆì‚° ê³„ì‚°
function calculateBudget() {
  const guestCount = parseInt(document.getElementById('guestCount').value) || 200;
  const region = document.getElementById('region').value;
  const style = document.getElementById('style').value;
  
  let base = 0;
  
  // ìŠ¤íƒ€ì¼ë³„ ê¸°ë³¸ ê¸ˆì•¡
  if (style === 'ìŠ¤ëª°ì›¨ë”©') {
    base = 8000000;
  } else if (style === 'ì¼ë°˜') {
    base = 20000000;
  } else {
    base = 35000000;
  }
  
  // ì§€ì—­ë³„ ê°€ì‚°
  const regionMultiplier = {
    'ì„œìš¸': 1.3,
    'ê²½ê¸°': 1.1,
    'ì¸ì²œ': 1.0,
    'ë¶€ì‚°': 0.9,
    'ëŒ€êµ¬': 0.85,
    'ê¸°íƒ€': 0.8
  };
  
  base *= regionMultiplier[region] || 1;
  
  // í•˜ê° ìˆ˜ ë°˜ì˜ (200ëª… ê¸°ì¤€)
  const guestCost = (guestCount / 200) * base;
  
  const total = Math.round(guestCost / 1000000) * 1000000;
  
  document.getElementById('budgetAmount').textContent = 
    total.toLocaleString() + 'ì›';
}

// í†µê³„ ì—…ë°ì´íŠ¸
function updateStats(places) {
  document.getElementById('totalPlaces').textContent = places.length;
  
  const avgRating = places.reduce((sum, p) => sum + p.rating, 0) / places.length;
  document.querySelector('#statsBar .stat-card:nth-child(2) .stat-number').textContent = 
    avgRating.toFixed(1);
  
  const avgPrice = places.reduce((sum, p) => sum + p.priceInfo.numericTotal, 0) / places.length;
  document.getElementById('avgPrice').textContent = 
    (avgPrice / 1000000).toFixed(1) + 'M';
}

// ì´ˆê¸° ë Œë”ë§
renderList('ì „ì²´');

// Enter í‚¤ ê²€ìƒ‰
document.getElementById('keyword').addEventListener('keypress', function(e) {
  if (e.key === 'Enter') {
    searchPlace();
  }
});

// ì´ˆê¸° ì˜ˆì‚° ê³„ì‚°
calculateBudget();
</script>

<!-- Structured Data for SEO -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "ì›¨ë”©ì •ë³´ë§µ",
  "description": "ì „êµ­ ì›¨ë”©í™€, ìŠ¤íŠœë””ì˜¤, ë“œë ˆìŠ¤ìƒµ ì •ë³´ ë° ê°€ê²©ë¹„êµ",
  "url": "https://weddingmap.kr"
}
</script>

</body>
</html>
